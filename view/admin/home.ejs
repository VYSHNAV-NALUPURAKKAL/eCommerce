<!DOCTYPE html>
<html lang="en" class="">

<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <title>Tables - Admin One Tailwind CSS Admin Dashboard</title>


   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

   <!-- Tailwind is included -->
   <link rel="stylesheet" href="/public/adminAssets/css/main.css?v=1628755089081">


   <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
   <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
   <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
   <link rel="mask-icon" href="safari-pinned-tab.svg" color="#00b4b6" />

   <meta name="description" content="Admin One - free Tailwind dashboard">

   <meta property="og:url" content="https://justboil.github.io/admin-one-tailwind/">
   <meta property="og:site_name" content="JustBoil.me">
   <meta property="og:title" content="Admin One HTML">
   <meta property="og:description" content="Admin One - free Tailwind dashboard">
   <meta property="og:image" content="https://justboil.me/images/one-tailwind/repository-preview-hi-res.png">
   <meta property="og:image:type" content="image/png">
   <meta property="og:image:width" content="1920">
   <meta property="og:image:height" content="960">

   <meta property="twitter:card" content="summary_large_image">
   <meta property="twitter:title" content="Admin One HTML">
   <meta property="twitter:description" content="Admin One - free Tailwind dashboard">
   <meta property="twitter:image:src" content="https://justboil.me/images/one-tailwind/repository-preview-hi-res.png">
   <meta property="twitter:image:width" content="1920">
   <meta property="twitter:image:height" content="960">
   <!-- Global site tag (gtag.js) - Google Analytics -->
   <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130795909-1"></script>
   <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('js', new Date());
      gtag('config', 'UA-130795909-1');
   </script>

</head>

<body>

   <div id="app">

      <aside class="aside is-placed-left is-expanded">
         <div class="aside-tools">
            <div>
               STREAK-X <b class="font-black">FRAMES</b>
            </div>
         </div>
         <div class="menu is-menu-main">
            <p class="menu-label">General</p>
            <ul class="menu-list">
               <li class="active">
                  <a href="/admin">
                     <span class="icon"><i class="mdi mdi-desktop-mac"></i></span>
                     <span class="menu-item-label">Dashboard</span>
                  </a>
               </li>
            </ul>
            <p class="menu-label">Examples</p>
            <ul class="menu-list">
               <li class="--set-active-tables-html">
                  <a href="/admin/customers">
                     <span class="icon"><i class="mdi mdi-account-group"></i></span>
                     <span class="menu-item-label">Customers</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/categories">
                     <span class="icon"><i class="mdi mdi-folder-outline"></i></span>
                     <span class="menu-item-label">Categories</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/offer">
                     <span class="icon"><i class="mdi mdi-tag"></i></span>
                     <span class="menu-item-label">Offer</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/coupon">
                     <span class="icon"><i class="mdi mdi-ticket-percent"></i></span>
                     <span class="menu-item-label">Coupons</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/products">
                     <span class="icon"><i class="mdi mdi-package-variant-closed"></i></span>
                     <span class="menu-item-label">Products</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/orders">
                     <span class="icon"><i class="mdi mdi-cart-outline"></i></span>
                     <span class="menu-item-label">Orders</span>
                  </a>
               </li>
               <li class="--set-active-tables-html">
                  <a href="/admin/sales">
                     <span class="icon"><i class="mdi mdi-chart-line"></i>
                     </span>
                     <span class="menu-item-label">Sales</span>
                  </a>
               </li>
               <li>
                  <a href="/admin/adminLogout">
                     <span class="icon"><i class="mdi mdi-lock"></i></span>
                     <span class="menu-item-label">Logout</span>
                  </a>
               </li>
         </div>
      </aside>

      <section class="is-title-bar">
         <div class="flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0">
            <ul>
               <li>Admin</li>
               <li>Dashboard</li>
            </ul>
         </div>
      </section>

      <section class="is-hero-bar">
         <div class="flex flex-col md:flex-row items-center justify-between space-y-6 md:space-y-0">
            <h1 class="title">
               Dashboard
            </h1>
         </div>
      </section>



      <div class="main-panel">
         <div class="content-wrapper">
            <div>
               <!-- Statistics section -->
               <div class="row">
                  <!-- User Count Card -->
                  <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                     <div class="card">
                        <div class="card-body">
                           <div class="row">
                              <div class="col-9">
                                 <div class="d-flex align-items-center align-self-start">
                                    <h3 class="mb-0">
                                       <%= userCount %>
                                    </h3>
                                    <p class="text-success ms-2 mb-0 font-weight-medium">
                                       <%= averageUsers.toFixed(2) %>%
                                    </p>
                                 </div>
                              </div>
                              <div class="col-3">
                                 <div class="icon icon-box-success">
                                    <span class="<%= iconClass %> icon-item"></span>
                                 </div>
                              </div>
                           </div>
                           <h6 class="text-muted font-weight-normal">Number of Users</h6>
                        </div>
                     </div>
                  </div>

                  <!-- Daily Income Card -->
                  <% const targetIncome=2000; const incomeDifference=((dailyIncome - targetIncome) / targetIncome) *
                     100; const incomePercentage=incomeDifference.toFixed(2); const isIncomeAboveTarget=dailyIncome>=
                     targetIncome;
                     %>
                     <% if (dailyIncome> 0) { %>
                        <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                           <div class="card">
                              <div class="card-body">
                                 <div class="row">
                                    <div class="col-9">
                                       <div class="d-flex align-items-center align-self-start">
                                          <h3 class="mb-0">
                                             <%= dailyIncome.toFixed(2) %>
                                          </h3>
                                          <% if (isIncomeAboveTarget) { %>
                                             <p class="text-success ms-2 mb-0 font-weight-medium">+<%= incomePercentage
                                                   %>%</p>
                                             <% } else { %>
                                                <p class="text-danger ms-2 mb-0 font-weight-medium">
                                                   <%= incomePercentage %>%
                                                </p>
                                                <% } %>
                                       </div>
                                       <h6 class="text-muted font-weight-normal">Daily Income</h6>
                                    </div>
                                    <div class="col-3">
                                       <% if (isIncomeAboveTarget) { %>
                                          <div class="icon icon-box-success">
                                             <span class="mdi mdi-arrow-top-right icon-item"></span>
                                          </div>
                                          <% } else { %>
                                             <div class="icon icon-box-danger">
                                                <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                                             </div>
                                             <% } %>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <% } else { %>
                           <!-- No Income Card -->
                           <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                              <div class="card">
                                 <div class="card-body">
                                    <div class="row">
                                       <div class="col-9">
                                          <div class="d-flex align-items-center align-self-start">
                                             <h3 class="mb-0">0</h3>
                                             <p class="text-danger ms-2 mb-0 font-weight-medium">Not available</p>
                                          </div>
                                       </div>
                                       <div class="col-3">
                                          <div class="icon icon-box-danger">
                                             <span class="mdi mdi-arrow-bottom-left icon-item"></span>
                                          </div>
                                       </div>
                                       <h6 class="text-muted font-weight-normal">No income yet</h6>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <% } %>

                              <!-- Total Revenue Card -->
                              <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                                 <div class="card">
                                    <div class="card-body">
                                       <div class="row">
                                          <div class="col-9">
                                             <div class="d-flex align-items-center align-self-start">
                                                <h3 class="mb-0">
                                                   <%= totalRevenue.toFixed(2) %>
                                                </h3>
                                                <p class="text-warning ms-2 mb-0 font-weight-medium">INR</p>
                                             </div>
                                          </div>
                                          <div class="col-3">
                                             <div class="icon icon-box-warning">
                                                <span class="mdi mdi-currency-inr icon-item"></span>
                                             </div>
                                          </div>
                                       </div>
                                       <h6 class="text-muted font-weight-normal">Total Revenue </h6>
                                    </div>
                                 </div>
                              </div>

                              <!-- Pending Orders Card -->
                              <div class="col-xl-3 col-sm-6 grid-margin stretch-card">
                                 <div class="card">
                                    <div class="card-body">
                                       <div class="row">
                                          <div class="col-9">
                                             <div class="d-flex align-items-center align-self-start">
                                                <h3 class="mb-0">
                                                   <%= pendingOrdersCount %>
                                                </h3>
                                             </div>
                                             <h6 class="text-muted font-weight-normal">Pending Orders</h6>
                                          </div>
                                          <div class="col-3">
                                             <div class="icon icon-box-danger">
                                                <span class="mdi mdi-alert-box icon-item"></span>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
               </div>

               <div class="row">
                  <!-- First Bar Chart -->
                  <div class="col-lg-6 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <h4 class="card-title"><b>Monthly Sales</b></h4>
                              <canvas id="chartContainer"></canvas>
                          </div>
                      </div>
                  </div>
              
                  <!-- Second Bar Chart -->
                  <div class="col-lg-6 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <h4 class="card-title"><b>Today Sales</b></h4>
                              <canvas id="chartContainer2"></canvas>
                          </div>
                      </div>
                  </div>
              </div>
              
              <!-- Pie Chart 1 -->
              <div class="row">
                  <div class="col-lg-4 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <h4 class="card-title"><b>Top Selling Products</b></h4>
                              <canvas id="pieChart"></canvas>
                          </div>
                      </div>
                  </div>
              
                  <!-- Doughnut Chart -->
                  <div class="col-lg-4 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <h4 class="card-title"><b>Payment Method</b></h4>
                              <canvas id="doughnutChart"></canvas>
                          </div>
                      </div>
                  </div>
              
                  <!-- Pie Chart 2 -->
                  <div class="col-lg-4 grid-margin stretch-card">
                      <div class="card">
                          <div class="card-body">
                              <h4 class="card-title"><b>Top Selling Categories</b></h4>
                              <canvas id="pieChart2"></canvas>
                          </div>
                      </div>
                  </div>
              </div>
              

               <div class="row" style="margin-top: 20px;">
                  <div class="col-12">
                     <div class="card">
                        <div class="card-body">
                           <div class="row">
                              <div class="col-md-12">
                                 <div id="audience-map" class="vector-map"></div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>



      <script type="text/javascript" src="/public/adminAssets/js/main.min.js?v=1628755089081"></script>

      <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

      <script>

         document.addEventListener("DOMContentLoaded", function () {

            const monthlySalesData = <%- monthlySales %>
            console.log(
               "monthly sasles :",monthlySalesData
            );
            const months = monthlySalesData.map(entry => entry.month);
            const productsSold = monthlySalesData.map(entry => entry.productsSold);

            const ctx = document.getElementById('chartContainer');

            new Chart(ctx, {
               type: 'bar',
               data: {
                  labels: months,
                  datasets: [{
                     label: 'Monthly Sales Report',
                     data: productsSold,
                     backgroundColor: 'rgba(54, 162, 235, 0.2)',
                     borderColor: 'rgba(54, 162, 235, 1)',
                     borderWidth: 1
                  }]
               },
               options: {
                  scales: {
                     y: {
                        beginAtZero: true,
                        stepSize: 1
                     }
                  },
                  layout: {
                     padding: {
                        left: 40
                     }
                  }
               }
            });

            const chartContainer2 = document.getElementById("chartContainer2")
            const labels = <%- labels %>
            const amounts = <%- amounts %>
            new Chart(chartContainer2,{
               type:"bar",
               data: {
                  labels: labels,
                  datasets: [{
                     label: 'Today Sales',
                     data: amounts,
                     backgroundColor: 'rgba(54, 162, 235, 0.2)',
                     borderColor: 'rgba(54, 162, 235, 1)',
                     borderWidth: 1
                  }]
               },
               options: {
                  scales: {
                     y: {
                        beginAtZero: true,
                        stepSize: 1
                     }
                  },
                  layout: {
                     padding: {
                        left: 40
                     }
                  }
               }

            })



            const doughnutChart = document.getElementById('doughnutChart')
            const doughnut = new Chart(doughnutChart, {
               type: 'doughnut',
               data: {
                  labels: [
                     'Cash On Delivery',
                     "Online Payment",
                     'Wallet'
                  ],
                  datasets: [{
                     label: 'Payment Method Stats',
                     data: [<%= paymentMethods.CashOnDelivery %>,<%= paymentMethods.OnlinePayment %>, <%= paymentMethods.Wallet %>],
                     backgroundColor: [
                        'rgba(75, 192, 192, 0.5)',
                        'rgba(255, 99, 132, 0.5)',
                        'rgba(54, 162, 235, 0.5)'
                     ],
                     borderColor: [
                        'rgba(75, 192, 192, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                     ],
                     borderWidth: 1
                  }]
               },
               options: {
                  responsive: true,
                  maintainAspectRatio: true,
                  legend: {
                     position: 'right',
                  },
                  layout: {
                     left: 20,
                     right: 20,
                     top: 20,
                     bottom: 20
                  }
               }
            })


            //here doing the things for pie chart
            const topProductNames = <%- JSON.stringify(topProductNames) %>;
            const soldQuantities = <%- JSON.stringify(soldQuantities) %>;

            const topProductNamesArray = topProductNames.map(product => product.name);
            const pieChart = document.getElementById("pieChart");

            const backgroundColors = [];
            for (let i = 0; i < topProductNamesArray.length; i++) {
               const randomColor = `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)})`;
               backgroundColors.push(randomColor);
            }

            const pie = new Chart(pieChart, {
               type: "pie",
               data: {
                  labels: topProductNamesArray,
                  datasets: [{
                     label: 'Top Sold Products',
                     data: soldQuantities,
                     backgroundColor: backgroundColors,
                     hoverOffset: 4
                  }]
               },
               options: {
                  plugins: {
                     title: {
                        display: true,
                        text: 'Top Sold Products'
                     },
                     legend: {
                        display: true,
                        position: 'bottom'
                     },
                     tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0,0,0,0.7)',
                        titleColor: 'white',
                        bodyColor: 'white'
                     }
                  },
                  animation: {
                     animateScale: true,
                     animateRotate: true
                  }
               }
            });



            const topCategory = <%- JSON.stringify(topCategoryNames) %>
            const soldCategoryCount = <%- JSON.stringify(categorySoldCount) %>

            const topCategoryNamesArray = topCategory.map((category) => category.categoryName)

            const pieChart2 = document.getElementById("pieChart2")

            const backgroundColors2 = [];
            for (let i = 0; i < topCategoryNamesArray.length; i++) {
               const randomColor = `rgb(${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 255)}, ${Math.floor(Math.random() * 256)})`;
               backgroundColors2.push(randomColor);
            }
            new Chart(pieChart2, {
               type: "pie",
               data: {
                  labels: topCategoryNamesArray,
                  datasets: [{
                     label: 'Top Sold Category',
                     data: soldCategoryCount,
                     backgroundColor: backgroundColors2,
                     hoverOffset: 4
                  }]
               },
               options: {
                  plugins: {
                     title: {
                        display: true,
                        text: 'Top Sold Category'
                     },
                     legend: {
                        display: true,
                        position: 'bottom'
                     },
                     tooltip: {
                        enabled: true,
                        backgroundColor: 'rgba(0,0,0,0.7)',
                        titleColor: 'white',
                        bodyColor: 'white'
                     }
                  },
                  animation: {
                     animateScale: true,
                     animateRotate: true
                  }
               }
            });


         });


      </script>

      <script src="https://cdn.jsdelivr.net/npm/chartist"></script>
      <script src="https://d3js.org/d3.v6.min.js"></script>
      <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=658339141622648&ev=PageView&noscript=1" /></noscript>

      <!-- Icons below are for demo only. Feel free to use any icon pack. Docs: https://bulma.io/documentation/elements/icon/ -->
      <link rel="stylesheet" href="https://cdn.materialdesignicons.com/4.9.95/css/materialdesignicons.min.css">

</body>

</html>